import{h as l,e as c,j as s}from"./index-Dz6EtJIT.js";import{u,a as p,L as d,P as m}from"./useInvalidatePolls-Dg6OZHrl.js";import{M as x}from"./card-DufcsVxw.js";function h(){const{user:e}=l(),{data:t,error:r,isPending:i}=u({queryKey:["polls",e==null?void 0:e.id],queryFn:async()=>{const o=await(await fetch("/api/poll")).json();return!o||!o.length?[]:o.map(a=>(a.options=a.options.map(n=>!e||!e.id?n:n.allVotes.includes(e.id)?{...n,selected:!0}:n),a))}});return{polls:t,error:r,isPending:i}}const L=c("/")({component:f});function f(){const{polls:e,isPending:t,error:r}=h();return p(),s.jsx(x,{children:t?s.jsx(d,{}):r?s.jsxs("p",{children:["Error: ",r.message]}):e&&e.length>0?s.jsx(m,{polls:e}):s.jsx("p",{className:"text-center text-xl",children:"There are no polls."})})}export{L as Route};
